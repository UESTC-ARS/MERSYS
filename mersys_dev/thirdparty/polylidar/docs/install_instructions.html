

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Software Overview &mdash; Polylidar3D 1.0.9 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/collapsible-lists\js\CollapsibleLists.compressed.js"></script>
        <script src="_static/collapsible-lists\js\apply-collapsible-lists.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Building Documentation" href="builddocs.html" />
    <link rel="prev" title="Introducing Polylidar3D" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Polylidar3D
          

          
            
            <img src="_static/pl_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducing Polylidar3D</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id1">Install Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#build-project-library">Build Project Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-and-install-python-extension">Build and Install Python Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-example-fixture-data">Download Example/Fixture Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#c-projects">C++ Projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cmake-integration">CMake Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#robust-geometric-predicates">Robust Geometric Predicates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="builddocs.html">Building Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial/Python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/C%2B%2B/index.html">C++</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="python_api/polylidar.html">polylidar</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_api/polylidar.polylidarutil.plane_filtering.html">polylidar.polylidarutil.plane_filtering</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp_api/cpp_library_root.html">C++ Library API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Polylidar3D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Software Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="software-overview">
<span id="install-instructions"></span><h1>Software Overview<a class="headerlink" href="#software-overview" title="Permalink to this headline">¶</a></h1>
<img alt="https://raw.githubusercontent.com/JeremyBYU/polylidar/major_changes_refactor/assets/polylidar_3D_architecture.jpg" src="https://raw.githubusercontent.com/JeremyBYU/polylidar/major_changes_refactor/assets/polylidar_3D_architecture.jpg" />
<p>Polylidar3D is a non-convex polygon extraction algorithm which takes as input either unorganized 2D point sets, unorganized 3D point clouds (e.g., airborne LiDAR point clouds), organized point clouds (e.g., range images), or user provided meshes.
The non-convex polygons extracted represent flat surfaces in an environment, while interior holes represent obstacles on said surfaces. The picture above provides an overview of Polylidar3D’s data input, frontend, backend, and output.
The frontend transforms input data into a half-edge triangular mesh. This representation provides a common level of abstraction such that the the back-end core algorithms may efficiently operate on.
The back-end is composed of four core algorithms: mesh smoothing, dominant plane normal estimation, planar segment extraction, and finally polygon extraction.</p>
<p>Currently this repo (named Polylidar3D) has all the front-end modules and the plane/polygon extraction of the back-end core algorithms.
The GPU accelerated mesh smoothing procedures for organized points clouds are found in a separate repo titled <a class="reference external" href="https://github.com/JeremyBYU/OrganizedPointFilters">OrganizedPointFilters</a>.
This must be installed if you desire fast mesh smoothing for organized point clouds (i.e., denoising).
The dominant plane normal estimation procedure is general and implemented in a separate repo titled <a class="reference external" href="https://github.com/JeremyBYU/FastGaussianAccumulator">Fast Gaussian Accumulator (FastGA)</a>.
This must be installed if you don’t know the dominant plane normals in your data input (very likely for organized point clouds and meshes).
These modules themselves are written in C++ as well with Python bindings; see the respective repos for installation instructions.
One day I will try to ease installation burden and automatically pull these dependencies into the build process.</p>
</section>
<section id="id1">
<h1>Install Instructions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>If you just want to install the python bindings and have a supported architecture, use pip: <cite>pip install polylidar</cite>. Binary wheels have been created for Windows, Linux, and MacOS.
If this fails see below to install from source.</p>
<section id="build-project-library">
<h2>Build Project Library<a class="headerlink" href="#build-project-library" title="Permalink to this headline">¶</a></h2>
<p>This instructions are for people who want to modify Poylidar3D’s code and are focused on the C++ library. Building and subsequent installation is entirely through CMake now. You must have CMake 3.14 or higher installed and a C++ compiler with C++ 14 or higher. No built binaries are included currently.
There are several config options which can be specified here during step (2):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PL_BUILD_BENCHMARKS:BOOL=OFF // PL - Build Benchmarks
PL_BUILD_EXAMPLES:BOOL=ON // PL - Build Examples
PL_BUILD_PYMODULE:BOOL=ON // PL -Build Python Module
PL_BUILD_TESTS:BOOL=ON // PL - Build Tests
PL_BUILD_WERROR:BOOL=OFF // PL - Add Werror flag to build (turns warnings into errors)
PL_USE_ROBUST_PREDICATES:BOOL=OFF // PL - Use Robust Geometric Predicates
PL_BUILD_FASTGA=OFF // PL - Build FastGA with Example&quot;
PL_WITH_OPENMP:BOOL=ON // PL - Build with OpenMP Support
</pre></div>
</div>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">cmake-build</span> <span class="pre">&amp;&amp;</span> <span class="pre">cd</span> <span class="pre">cmake-build</span></code> - create build folder directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">..</span> <span class="pre">-DCMAKE_BUILD_TYPE=Release</span> <span class="pre">-DFETCHCONTENT_QUIET=OFF</span> <span class="pre">-DPYTHON_EXECUTABLE=$(python3</span> <span class="pre">-c</span> <span class="pre">&quot;import</span> <span class="pre">sys;</span> <span class="pre">print(sys.executable)&quot;)</span></code> - For windows also add <code class="docutils literal notranslate"><span class="pre">-DCMAKE_GENERATOR_PLATFORM=x64</span></code>. This will take 10-20 minutes while dependencies are being downloaded from Github. Sorry, take a break!</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">.</span> <span class="pre">--config</span> <span class="pre">Release</span> <span class="pre">-j4</span></code> - Build Polylidar3D, change <code class="docutils literal notranslate"><span class="pre">-j4</span></code> to how many processors/threads you have.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span> <span class="pre">&amp;&amp;</span> <span class="pre">./cmake-build/polylidar-simple</span></code> - Simple test program.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There have been some recent issues with CMake not identifying the activated python virtual environment, see <a class="reference external" href="https://github.com/JeremyBYU/polylidar/issues/5">Issue</a> . To fix this add <code class="docutils literal notranslate"><span class="pre">-DPYTHON_EXECUTABLE=$(python3</span> <span class="pre">-c</span> <span class="pre">&quot;import</span> <span class="pre">sys;</span> <span class="pre">print(sys.executable)&quot;)</span></code> to force pybind11 to use your virtualenv python environment.
I have also noticed that things just “work again” if you use CMake 3.15 or higher as well as upgrade <code class="docutils literal notranslate"><span class="pre">pybind11</span></code> to version 2.6.0. However setting the python executable is simpler and less intrusive.</p>
</div>
</section>
<section id="build-and-install-python-extension">
<h2>Build and Install Python Extension<a class="headerlink" href="#build-and-install-python-extension" title="Permalink to this headline">¶</a></h2>
<p>The basic setup here is that CMake will build the python extension (.so or .dll) into a standalone folder. Then you use <cite>pip</cite> to install from that folder.</p>
<ol class="arabic simple">
<li><p>Install <a class="reference external" href="https://conda.io/projects/conda/en/latest/">conda</a> or create a python virtual environment (<a class="reference external" href="https://medium.freecodecamp.org/why-you-need-python-environments-and-how-to-manage-them-with-conda-85f155f4353c">Why?</a>). I recommend <code class="docutils literal notranslate"><span class="pre">conda</span></code> for Windows users. Activate your environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">shapely</span></code> - Only for Windows users because <code class="docutils literal notranslate"><span class="pre">conda</span></code> handles windows binary dependency correctly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">cmake-build</span></code> - Ensure you are in cmake build directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">.</span> <span class="pre">--target</span> <span class="pre">python-package</span> <span class="pre">--config</span> <span class="pre">Release</span> <span class="pre">-j4</span></code> - Build python extension, will create folder <code class="docutils literal notranslate"><span class="pre">cmake-build/lib/python_package</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">lib/python_package</span></code> - Change to standalone python package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> - Install the python package in <code class="docutils literal notranslate"><span class="pre">develop/edit</span></code> mode into python virtual environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">../../../</span> <span class="pre">&amp;&amp;</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">dev-requirements.txt</span></code> - Move back to main folder and install optional dependencies to run python examples.</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Polylidar3D uses Open3D to visualize 3D geometries (pointclouds, polygons, meshes, etc.). A recent version of Open3D has a serious performance regression which causes severe slowdown during visualization.
This regression is on versions 0.10 and 0.11 of Open3D. Regression details: <a class="reference external" href="https://github.com/intel-isl/Open3D/pull/2523">Link</a> , <a class="reference external" href="https://github.com/intel-isl/Open3D/issues/2472">Issue1</a> , <a class="reference external" href="https://github.com/intel-isl/Open3D/issues/2157">Issue2</a>.
I recommend that you stick with 0.9.0, build from master, or wait for 0.12.</p>
</div>
</section>
<section id="download-example-fixture-data">
<h2>Download Example/Fixture Data<a class="headerlink" href="#download-example-fixture-data" title="Permalink to this headline">¶</a></h2>
<p>You can download example data <a class="reference external" href="https://drive.google.com/file/d/1T5u7Cn8H_rWZpugcr_h3VrRx_onTpcX7/view?usp=sharinghttps://drive.google.com/file/d/1T5u7Cn8H_rWZpugcr_h3VrRx_onTpcX7/view?usp=sharing">here</a> . Everything should be placed in the <code class="docutils literal notranslate"><span class="pre">`fixtures`</span></code> folder.</p>
</section>
<section id="c-projects">
<h2>C++ Projects<a class="headerlink" href="#c-projects" title="Permalink to this headline">¶</a></h2>
<section id="cmake-integration">
<h3>CMake Integration<a class="headerlink" href="#cmake-integration" title="Permalink to this headline">¶</a></h3>
<p>To integrate with a <em>different</em> CMake Project do the following:</p>
<ol class="arabic simple">
<li><p>Add as a submodule into your repo: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">add</span> <span class="pre">https://github.com/JeremyBYU/polylidar</span> <span class="pre">thirdparty/polylidar</span></code></p></li>
<li><p>Add the following to your CMakeLists.txt file:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>add_subdirectory(&quot;thirdparty/polylidar&quot;)
... .
target_link_libraries(MY_BINARY polylidar)
</pre></div>
</div>
</section>
</section>
<section id="robust-geometric-predicates">
<h2>Robust Geometric Predicates<a class="headerlink" href="#robust-geometric-predicates" title="Permalink to this headline">¶</a></h2>
<p>Delaunator (the 2D triangulation library used for 2D Point Sets and Unorganized 3D Point Clouds) does not use <a class="reference external" href="https://github.com/mikolalysenko/robust-arithmetic-notes">robust geometric predicates</a> for its orientation and incircle tests; <a class="reference external" href="https://github.com/mapbox/delaunator/issues/43">reference</a>.
This means that the triangulation can be incorrect when points are nearly colinear or cocircular. A library developed by Jonathan Richard Shewchuk provides very fast adaptive precision floating point arithmetic for <a class="reference external" href="https://www.cs.cmu.edu/~quake/robust.html">geometric predicates</a>.
This library is released in the public domain and an updated version of it is maintained at this <a class="reference external" href="https://github.com/danshapero/predicates">repository</a>. I have included this source code in the folder <code class="docutils literal notranslate"><span class="pre">polylidar/predicates</span></code> .</p>
<p>If you desire to have robust geometric predicates built into Delaunator you must build with the CMake option. For example <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">..</span> <span class="pre">-DCMAKE_BUILD_TYPE=Release</span> <span class="pre">-DFETCHCONTENT_QUIET=OFF</span> <span class="pre">-DPL_USE_ROBUST_PREDICATES=ON</span></code>.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="builddocs.html" class="btn btn-neutral float-right" title="Building Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introducing Polylidar3D" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Jeremy Castagno

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>